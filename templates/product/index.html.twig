{% extends 'base.html.twig' %}

{% block title %}Accueil - Nos produits
{% endblock %}

{% block body %}
	{% include '_partials/_hero.html.twig' %}
	{% include '_partials/_breadcrumb.html.twig' %}
	<h1 class="mb-4">Nos produits</h1>
	<div class="row">
		{% for product in products %}
			<div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
				<div class="card h-100 shadow-sm">
					<a href="{{ path('app_product_show', {id: product.id}) }}">
						<img src="/uploads/product_images/{{ product['image_folder'] }}/{{ product['main_image'] }}" class="card-img-top bg-white" alt="{{ product['name'] }}" style="height: 180px; width: 100%; object-fit: contain; display: block; margin: auto;">
					</a>
					<div class="card-body d-flex flex-column">
						<h5 class="card-title">{{ product.name }}</h5>
						<p class="card-text mb-1">
							<span class="text-muted">Catégorie :</span>
							{{ product['category_name'] }}</p>
						<p class="card-text mb-1">
							<span class="text-muted">Vendeur :</span>
							{{ product['seller_name'] }}</p>
						<p class="card-text fw-bold text-success mb-2">{{ product.price|number_format(2, '.', ' ') }}
							€</p>
						<a href="{{ path('app_product_show', {id: product.id}) }}" class="btn btn-primary mt-auto">Voir le détail</a>
					</div>
				</div>
			</div>
		{% else %}
			<p>Aucun produit disponible.</p>
		{% endfor %}
	</div>
	<div class="row">
		<div class="col-12 d-flex justify-content-center mt-4">
		    <nav aria-label="Pagination">
		        <ul class="pagination">
		            {# Previous page #}
		            <li class="page-item{% if pagination.page == 1 %} disabled{% endif %}">
		                <a class="page-link" href="?page={{ pagination.page - 1 }}" tabindex="-1">&laquo;</a>
		            </li>
		            {# Page numbers #}
		            {% for p in 1..pagination.pages %}
		                <li class="page-item{% if p == pagination.page %} active{% endif %}">
		                    <a class="page-link" href="?page={{ p }}">{{ p }}</a>
		                </li>
		            {% endfor %}
		            {# Next page #}
		            <li class="page-item{% if pagination.page == pagination.pages %} disabled{% endif %}">
		                <a class="page-link" href="?page={{ pagination.page + 1 }}">&raquo;</a>
		            </li>
		        </ul>
		    </nav>
		</div>
	</div>
{% endblock %}

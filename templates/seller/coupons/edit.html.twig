{% extends 'base.html.twig' %}

{% block title %}Modifier le code promo
	{{ coupon. code }}
	- Konvix Technology
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<div class="card shadow-sm">
					<div class="card-header bg-warning text-dark">
						<h4 class="mb-0">
							<i class="bi bi-pencil me-2"></i>
							Modifier le code promo :
							<strong>{{ coupon.code }}</strong>
						</h4>
					</div>
					<div class="card-body p-4">

						{% for message in app.flashes('error') %}
							<div class="alert alert-danger alert-dismissible fade show" role="alert">
								<i class="bi bi-exclamation-triangle me-2"></i>
								{{ message }}
								<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
							</div>
						{% endfor %}

						<div class="alert alert-warning mb-4">
							<i class="bi bi-info-circle me-2"></i>
							<strong>Attention :</strong>
							Ce code a déjà été utilisé
							<strong>{{ coupon.usedCount }}</strong>
							fois.
						</div>

						{{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate':  'novalidate'}}) }}

						<div class="mb-4">
							{{ form_label(form.code, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
							{{ form_widget(form.code) }}
							{{ form_help(form.code) }}
							<div class="invalid-feedback d-block">
								{{ form_errors(form.code) }}
							</div>
						</div>

						<div class="mb-4">
							{{ form_label(form.type, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
							<div class="form-check">
								{{ form_widget(form.type) }}
							</div>
							{{ form_help(form.type) }}
							<div class="invalid-feedback d-block">
								{{ form_errors(form.type) }}
							</div>
						</div>

						<div class="mb-4">
							{{ form_label(form. discount, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
							<div class="input-group">
								{{ form_widget(form.discount) }}
								<span class="input-group-text">
									<i class="bi bi-percent"></i>
									/
									<i class="bi bi-currency-euro"></i>
								</span>
							</div>
							{{ form_help(form.discount) }}
							<div class="invalid-feedback d-block">
								{{ form_errors(form.discount) }}
							</div>
						</div>

						<div class="mb-4">
							{{ form_label(form.expiresAt, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
							{{ form_widget(form.expiresAt) }}
							{{ form_help(form.expiresAt) }}
							<div class="invalid-feedback d-block">
								{{ form_errors(form.expiresAt) }}
							</div>
						</div>

						<div class="mb-4">
							{{ form_label(form.usageLimit, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
							{{ form_widget(form.usageLimit) }}
							{{ form_help(form. usageLimit) }}
							<div class="invalid-feedback d-block">
								{{ form_errors(form.usageLimit) }}
							</div>
						</div>

						<div class="mb-4">
							<div class="form-check form-switch">
								{{ form_widget(form.isActive) }}
								{{ form_label(form.isActive, null, {'label_attr': {'class': 'form-check-label'}})  }}
							</div>
							{{ form_help(form.isActive) }}
							<div class="invalid-feedback d-block">
								{{ form_errors(form.isActive) }}
							</div>
						</div>

						<div class="d-grid gap-2 d-md-flex justify-content-md-end">
							<a href="{{ path('seller_coupons_list') }}" class="btn btn-secondary">
								<i class="bi bi-x-circle me-2"></i>
								Annuler
							</a>
							<button type="submit" class="btn btn-warning text-dark">
								<i class="bi bi-check-circle me-2"></i>
								Enregistrer les modifications
							</button>
						</div>

						{{ form_end(form) }}

					</div>
				</div>

				<div class="mt-4">
					<a href="{{ path('seller_coupons_list') }}" class="btn btn-secondary">
						<i class="bi bi-arrow-left me-2"></i>
						Retour à la liste
					</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% extends 'base.html.twig' %}
{% block title %}Suivi de colis La Poste{% endblock %}

{% block body %}
<div class="container mt-4">
    <h2>Suivi du colis : {{ trackingNumber }}</h2>
    {% if result is not null and result.shipments is defined and result.shipments[0] is defined %}
        {% set shipment = result.shipments[0] %}
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <strong>Statut actuel :</strong> {{ shipment.status.label|default('N/A') }}
            </div>
            <div class="card-body">
                <ul class="timeline">
                    {% for event in shipment.events|default([]) %}
                        <li>
                            <span class="badge bg-info">{{ event.label|default('') }}</span>
                            <small class="text-muted">{{ event.date|date('d/m/Y H:i') }}</small>
                            <div>{{ event.location.label|default('') }}</div>
                        </li>
                    {% endfor %}
                </ul>
                <p><strong>Expéditeur :</strong> {{ shipment.sender|default('-') }}</p>
                <p><strong>Destinataire :</strong> {{ shipment.addressee|default('-') }}</p>
            </div>
        </div>
    {% else %}
        <div class="alert alert-warning">Aucune information trouvée pour ce numéro de suivi.</div>
    {% endif %}
    <a href="{{ app.request.headers.get('referer') ?? path('seller_products') }}" class="btn btn-secondary mt-3">Retour</a>
</div>

<style>
.timeline {
    list-style: none;
    padding-left: 0;
}
.timeline li {
    margin-bottom: 1.5rem;
    position: relative;
    padding-left: 1.5rem;
}
.timeline li:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.5rem;
    width: 10px;
    height: 10px;
    background: #0d6efd;
    border-radius: 50%;
}
</style>
{% endblock %}
